<html>
  <head>
    <title>Apertium Rule-Explainer</title>
    <script src="wasm/tree-sitter.js"></script>
    <script src="jquery.js"></script>
    <script src="js-code2text/code2text.js"></script>
    <script src="data.js"></script>
    <script src="rule-explainer.js"></script>
    <script src="tags.js"></script>
    <!-- TODO: limit code and explanation to 1/2 window, and wrap code lines-->
    <style>
      .highlighted {
          background: yellow;
      }
      .tree-node {
          margin-left: 5px;
          border: 1px dashed grey;
      }
      #code {
          width: 100%;
          white-space: pre;
          font-family: monospace;
      }
      .code-line {
          margin-top: 0px;
          margin-bottom: 0px;
          max-width: 50vw;
      }
      td {
          width: 50%;
          vertical-align: top;
          overflow-y: auto;
      }
      /* TODO: don't hardcode this, calculate off of window height */
      #code, #tree {
          height: 500px;
      }
      #tree p {
          margin-bottom: 0px;
          margin-top: 5px;
      }
      #display {
          width: 100%;
      }
      .variable {
          color: purple;
      }
      .constant-numeric, .constant-builtin {
          color: blue;
      }
      .punctuation-delimiter {
          color: grey;
      }
      .constant-string {
          color: brown;
      }
      .keyword-control, .keyword {
          color: darkblue;
      }
      .keyword-operator, .operator {
          color: gold;
      }
      .string-quoted {
          color: green;
      }
      .comment {
          color: grey;
      }
      .error {
          background: red;
      }
      .code-line::before {
          content: attr(data-line);
          color: black;
          background: lightgrey;
          display: inline-block;
          text-align: right;
          width: 30px;
          margin-right: 5px;
      }
      .code-line:nth-child(odd) {
          background: #EEEEEE;
      }
      span.tree-node[data-note]::after {
          content: attr(data-note);
          font-size: x-small;
          font-style: italic;
          margin-left: 2px;
      }
    </style>
  </head>
  <body>
    <select id="parser">
      <option value="RTX">apertium-recursive RTX</option>
      <option value="TWOLC">HFST TwoLC</option>
      <option value="CG">Constraint Grammar</option>
    </select>
    <button id="update">Update Explanation</button>
    <table id="display">
      <tbody>
        <tr>
          <td><div id="code" contenteditable>! type code here</div></td>
          <td><div id="tree"></div></td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
